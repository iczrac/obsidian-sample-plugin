# 大运默认选择修复测试

## 问题描述
用户反映 `extend: 0` 时还显示前运列，说明默认选择第一个大运的逻辑没有被正确取消。

## 修复内容
1. **取消InteractiveBaziView中的默认大运选择**
   - 移除 `this.selectDaYun(0)` 的调用
   - 让扩展列功能完全控制大运的选择

2. **确保ExtendedColumnManager的正确初始化**
   - `selectedDaYunIndex = -1`（默认不选择任何大运）
   - 只有在扩展配置时才设置大运索引

## 测试用例

### 测试1：不扩展（应该不显示任何扩展列）
```bazi
date: 1990-01-01 08:00
gender: 男
e: 0
```

### 测试2：不扩展（使用完整参数）
```bazi
date: 1990-01-01 08:00
gender: 男
extend: none
```

### 测试3：当前时间扩展（应该显示正确的大运）
```bazi
date: 1990-01-01 08:00
gender: 男
e: 1
```

### 测试4：流日扩展（应该显示正确的大运）
```bazi
date: 1990-01-01 08:00
gender: 男
e: 2
```

### 测试5：特殊宫位（不应该显示大运）
```bazi
date: 1990-01-01 08:00
gender: 男
e: 4
```

### 测试6：没有扩展参数（应该不显示任何扩展列）
```bazi
date: 1990-01-01 08:00
gender: 男
style: 3
```

## 预期结果

| 测试用例 | 扩展参数 | 预期大运显示 | 预期扩展列 |
|----------|----------|--------------|------------|
| 测试1 | `e: 0` | 不显示 | 无 |
| 测试2 | `extend: none` | 不显示 | 无 |
| 测试3 | `e: 1` | 显示2024年对应大运 | 大运+流年+流月+流日+流时 |
| 测试4 | `e: 2` | 显示2024年对应大运 | 大运+流年+流月+流日 |
| 测试5 | `e: 4` | 不显示 | 胎元+命宫+身宫 |
| 测试6 | 无 | 不显示 | 无 |

## 关键修复点

1. **InteractiveBaziView.initView()**
   ```typescript
   // 修改前：
   if (this.baziInfo.daYun && this.baziInfo.daYun.length > 0) {
     this.selectDaYun(0); // 默认选择第一个大运
   }
   
   // 修改后：
   // 不再默认选中第一个大运，让扩展列功能来控制
   console.log('ℹ️ 跳过默认大运选择，由扩展列功能控制');
   ```

2. **ExtendedColumnManager初始化**
   ```typescript
   private selectedDaYunIndex = -1; // 默认不选择任何大运
   ```

3. **扩展列类型处理**
   ```typescript
   case ExtendedColumnType.NONE:
     this.clearAllExtendedColumns(true); // 重置大运索引
     this.currentExtendedLevel = 'none';
     break;
   ```

## 验证方法

1. **控制台日志检查**
   - 查看是否有 "跳过默认大运选择" 的日志
   - 查看大运索引的设置日志
   - 确认扩展列的处理日志

2. **界面检查**
   - `e: 0` 时不应该显示任何扩展列
   - `e: 1` 时应该显示正确的大运和其他层级
   - 没有扩展参数时不应该显示扩展列

3. **功能验证**
   - 扩展列的显示/隐藏是否正确
   - 大运索引的设置是否正确
   - 不同扩展模式的切换是否正常
