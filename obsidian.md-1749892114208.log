plugin:bazi-obsidian:1020 🎯 bazi代码块被触发!
plugin:bazi-obsidian:1020 🔍 处理八字代码块开始
plugin:bazi-obsidian:1020 📝 源代码内容: bazi: 丁卯 壬子 庚子 丙子
gender: 女
year: 1987
style: 3
plugin:bazi-obsidian:1020 ⚙️ 解析后的参数: {bazi: '丁卯 壬子 庚子 丙子', gender: '女', year: '1987', style: '3'}
plugin:bazi-obsidian:1021 🔥🔥🔥🔥🔥 调用 BaziService.parseBaziString
plugin:bazi-obsidian:1021 🔥 参数 bazi: 丁卯 壬子 庚子 丙子
plugin:bazi-obsidian:1021 🔥 参数 year: 1987
plugin:bazi-obsidian:1021 🔥 参数 gender: 0
plugin:bazi-obsidian:7 🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥 BaziService.parseBaziString 开始 🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥
plugin:bazi-obsidian:7 🔥 ========== BaziService.parseBaziString 开始 ==========
plugin:bazi-obsidian:7 🔥 输入参数:
plugin:bazi-obsidian:7   - baziStr: 丁卯 壬子 庚子 丙子
plugin:bazi-obsidian:7   - specifiedYear: 1987
plugin:bazi-obsidian:7   - gender: 0
plugin:bazi-obsidian:7   - sect: 2
plugin:bazi-obsidian:7 🔥 八字分割结果: (4) ['丁卯', '壬子', '庚子', '丙子']
plugin:bazi-obsidian:6 使用传统方法计算匹配年份
plugin:bazi-obsidian:7 🔥 尝试日期反推，年份: 1987
plugin:bazi-obsidian:7 🔥 匹配年份列表: (7) [1747, 1807, 1867, 1927, 1987, 2047, 2107]
plugin:bazi-obsidian:7 🔥 年份是否在匹配列表中: true
 🔥 fromBaZi返回的日期数量: 17
 🔥 检查日期: 7 12 19
 🔥 检查日期: 188 1 3
 🔥 检查日期: 247 12 19
 🔥 检查日期: 428 1 3
 🔥 检查日期: 487 12 19
 🔥 检查日期: 727 12 19
 🔥 检查日期: 787 12 4
 🔥 检查日期: 967 12 19
 🔥 检查日期: 1027 12 4
 🔥 检查日期: 1207 12 19
 🔥 检查日期: 1267 12 4
 🔥 检查日期: 1447 12 19
 🔥 检查日期: 1507 12 4
 🔥 检查日期: 1687 12 29
 🔥 检查日期: 1747 12 15
 🔥 检查日期: 1928 1 1
 🔥 检查日期: 1987 12 17
 🔥 ✅ 日期反推成功 - 指定年份: 1987
 🔥 ✅ 日期反推结果 - 阳历日期: 1987-12-17
 🔥 ✅ 日期反推结果 - 农历日期: 一九八七年十月廿七
 🔥 formatBaziInfo路径：传递用户输入八字信息
 🎯 身宫计算结果: 癸丑
 🎯 格局计算结果: {geJu: '食神格', geJuType: '正格', detail: '月令食神，主福寿', geJuStrength: 7, isSpecialGeJu: false, …}
 🚀🚀🚀 formatBaziInfo: 开始独立五行强度计算
 🔍 formatBaziInfo使用用户输入八字进行独立计算
 🔍 formatBaziInfo当前八字: {year: '丁卯', month: '壬子', day: '庚子', hour: '丙子'}
 🚀🚀🚀🚀🚀🚀🚀🚀🚀🚀 WuXingStrengthCalculator.calculateWuXingStrengthFromBazi 开始 🚀🚀🚀🚀🚀🚀🚀🚀🚀🚀
 🔍 独立计算八字: 丁卯 壬子 庚子 丙子
 🚀🚀🚀🚀🚀🚀🚀🚀🚀🚀 WuXingStrengthCalculator.calculateWuXingStrength 开始 🚀🚀🚀🚀🚀🚀🚀🚀🚀🚀
 🚀 开始计算五行强度 - WuXingStrengthCalculator.calculateWuXingStrengthWithDetails
 🔍 调用者: at Oe.calculateWuXingStrengthFromBazi (plugin:bazi-obsidian:7:11723)
 🔍 调用时间: 2025-06-14T09:08:24.239Z
 🔍 八字: 丁卯 壬子 庚子 丙子
 🔍 天干: 年干丁(火)=2
 🔍 天干: 月干壬(水)=4
 🔍 地支卯藏干: 乙, 权重分配: 1
 🔍   乙(木) 本气: 2 × 1 = 2.00
 🔍 地支子藏干: 癸, 权重分配: 1
 🔍   癸(水) 本气: 8 × 1 = 8.00
 🔍 地支子藏干: 癸, 权重分配: 1
 🔍   癸(水) 本气: 5 × 1 = 5.00
 🔍 地支子藏干: 癸, 权重分配: 1
 🔍   癸(水) 本气: 5 × 1 = 5.00
 🔍 季节调整: 月支=子, 季节=冬
 🔍 基础强度: 金=6, 木=8, 水=58.5, 火=11, 土=1.5
 🔍 水季节调整: 基础=58.50, 系数=1.5, 调整后=87.75, 调整量=29.25
 🔍 木季节调整: 基础=8.00, 系数=1.2, 调整后=9.60, 调整量=1.60
 🔍 金季节调整: 基础=6.00, 系数=1, 调整后=6.00, 调整量=0.00
 🔍 火季节调整: 基础=11.00, 系数=0.8, 调整后=8.80, 调整量=-2.20
 🔍 土季节调整: 基础=1.50, 系数=0.6, 调整后=0.90, 调整量=-0.60
 🎯🎯🎯🎯🎯 WuXingStrengthCalculator.calculateWuXingStrength 返回结果:
 🎯 金: 6
 🎯 木: 11.6
 🎯 水: 87.75
 🎯 火: 8.8
 🎯 土: 0.9
 🎯 是否有详细信息: true
 🎯 详细信息: {jin: {…}, mu: {…}, shui: {…}, huo: {…}, tu: {…}, …}
 🎯🎯🎯 formatBaziInfo: 五行强度计算结果: {jin: 6, mu: 11.6, shui: 87.75, huo: 8.8, tu: 0.9, …}
 🔍🔍🔍 formatBaziInfo: 土五行强度 = 0.9
 🔍🔍🔍 formatBaziInfo: 是否有详细信息 = true
 🔍 calculateRiZhuStrength: 使用已提供的五行强度，避免重复计算
 🎯 日主旺衰计算结果: {result: '身弱', details: {…}}
 🔍 DaYunCalculator.calculateDaYun 开始
 🔍 参数: gender = 0 , dayStem = 庚 , count = 10
 🔍 DaYunCalculator: 获取运势对象...
 🔍 DaYunCalculator: 运势对象获取成功: l0 {_gender: 0, _lunar: K, _forward: true, _startYear: 6, _startMonth: 10, …}
 🔍 DaYunCalculator: 获取大运列表...
 🔍 DaYunCalculator: 大运列表获取成功，数量: 10
 🔍 DaYunCalculator: 尝试获取大运旬空，干支: 
 🔍 DaYunCalculator: dy对象: h0 {_startYear: 1987, _endYear: 1993, _startAge: 1, _endAge: 7, _index: 0, …}
 🔍 DaYunCalculator: dy.getXunKong方法存在: true
plugin:bazi-obsidian:6 🚨 DaYunCalculator: 获取大运旬空信息失败: TypeError: Cannot read properties of null (reading 'index')
    at Y.getXunIndex (plugin:bazi-obsidian:6:15464)
    at Y.getXunKong (plugin:bazi-obsidian:6:15603)
    at h0.getXunKong (plugin:bazi-obsidian:6:211570)
    at eval (plugin:bazi-obsidian:6:343816)
    at Array.map (<anonymous>)
    at we.calculateDaYun (plugin:bazi-obsidian:6:343323)
    at Ce.formatBaziInfo (plugin:bazi-obsidian:7:25771)
    at Ce.parseBaziString (plugin:bazi-obsidian:7:16655)
    at e0.processBaziStringBased (plugin:bazi-obsidian:1021:3249)
    at e0.processBaziCodeBlock (plugin:bazi-obsidian:1020:22994)
eval @ plugin:bazi-obsidian:6
calculateDaYun @ plugin:bazi-obsidian:6
formatBaziInfo @ plugin:bazi-obsidian:7
parseBaziString @ plugin:bazi-obsidian:7
processBaziStringBased @ plugin:bazi-obsidian:1021
processBaziCodeBlock @ plugin:bazi-obsidian:1020
eval @ plugin:bazi-obsidian:1020
t.initDOM @ app.js:1
t.toDOM @ app.js:1
t.sync @ app.js:1
e.sync @ app.js:1
(anonymous) @ app.js:1
e.ignore @ app.js:1
t.updateInner @ app.js:1
t.update @ app.js:1
e.update @ app.js:1
dispatchTransactions @ app.js:1
e.dispatch @ app.js:1
(anonymous) @ app.js:1
setTimeout (async)
s @ app.js:1
plugin:bazi-obsidian:6 🚨 DaYunCalculator: 错误详情: Cannot read properties of null (reading 'index')
eval @ plugin:bazi-obsidian:6
calculateDaYun @ plugin:bazi-obsidian:6
formatBaziInfo @ plugin:bazi-obsidian:7
parseBaziString @ plugin:bazi-obsidian:7
processBaziStringBased @ plugin:bazi-obsidian:1021
processBaziCodeBlock @ plugin:bazi-obsidian:1020
eval @ plugin:bazi-obsidian:1020
t.initDOM @ app.js:1
t.toDOM @ app.js:1
t.sync @ app.js:1
e.sync @ app.js:1
(anonymous) @ app.js:1
e.ignore @ app.js:1
t.updateInner @ app.js:1
t.update @ app.js:1
e.update @ app.js:1
dispatchTransactions @ app.js:1
e.dispatch @ app.js:1
(anonymous) @ app.js:1
setTimeout (async)
s @ app.js:1
plugin:bazi-obsidian:6 🚨 DaYunCalculator: 错误堆栈: TypeError: Cannot read properties of null (reading 'index')
    at Y.getXunIndex (plugin:bazi-obsidian:6:15464)
    at Y.getXunKong (plugin:bazi-obsidian:6:15603)
    at h0.getXunKong (plugin:bazi-obsidian:6:211570)
    at eval (plugin:bazi-obsidian:6:343816)
    at Array.map (<anonymous>)
    at we.calculateDaYun (plugin:bazi-obsidian:6:343323)
    at Ce.formatBaziInfo (plugin:bazi-obsidian:7:25771)
    at Ce.parseBaziString (plugin:bazi-obsidian:7:16655)
    at e0.processBaziStringBased (plugin:bazi-obsidian:1021:3249)
    at e0.processBaziCodeBlock (plugin:bazi-obsidian:1020:22994)
eval @ plugin:bazi-obsidian:6
calculateDaYun @ plugin:bazi-obsidian:6
formatBaziInfo @ plugin:bazi-obsidian:7
parseBaziString @ plugin:bazi-obsidian:7
processBaziStringBased @ plugin:bazi-obsidian:1021
processBaziCodeBlock @ plugin:bazi-obsidian:1020
eval @ plugin:bazi-obsidian:1020
t.initDOM @ app.js:1
t.toDOM @ app.js:1
t.sync @ app.js:1
e.sync @ app.js:1
(anonymous) @ app.js:1
e.ignore @ app.js:1
t.updateInner @ app.js:1
t.update @ app.js:1
e.update @ app.js:1
dispatchTransactions @ app.js:1
e.dispatch @ app.js:1
(anonymous) @ app.js:1
setTimeout (async)
s @ app.js:1
 🔍 DaYunCalculator: 使用备用方法计算旬空结果: 
plugin:bazi-obsidian:6 🔍 DaYunCalculator: 尝试获取大运旬空，干支: 癸丑
plugin:bazi-obsidian:6 🔍 DaYunCalculator: dy对象: h0 {_startYear: 1994, _endYear: 2003, _startAge: 8, _endAge: 17, _index: 1, …}
plugin:bazi-obsidian:6 🔍 DaYunCalculator: dy.getXunKong方法存在: true
plugin:bazi-obsidian:6 🔍 DaYunCalculator: 成功获取旬空: 寅卯
plugin:bazi-obsidian:6 🔍 DaYunCalculator: 尝试获取大运旬空，干支: 甲寅
plugin:bazi-obsidian:6 🔍 DaYunCalculator: dy对象: h0 {_startYear: 2004, _endYear: 2013, _startAge: 18, _endAge: 27, _index: 2, …}
plugin:bazi-obsidian:6 🔍 DaYunCalculator: dy.getXunKong方法存在: true
plugin:bazi-obsidian:6 🔍 DaYunCalculator: 成功获取旬空: 子丑
plugin:bazi-obsidian:6 🔍 DaYunCalculator: 尝试获取大运旬空，干支: 乙卯
plugin:bazi-obsidian:6 🔍 DaYunCalculator: dy对象: h0 {_startYear: 2014, _endYear: 2023, _startAge: 28, _endAge: 37, _index: 3, …}
plugin:bazi-obsidian:6 🔍 DaYunCalculator: dy.getXunKong方法存在: true
plugin:bazi-obsidian:6 🔍 DaYunCalculator: 成功获取旬空: 子丑
plugin:bazi-obsidian:6 🔍 DaYunCalculator: 尝试获取大运旬空，干支: 丙辰
plugin:bazi-obsidian:6 🔍 DaYunCalculator: dy对象: h0 {_startYear: 2024, _endYear: 2033, _startAge: 38, _endAge: 47, _index: 4, …}
plugin:bazi-obsidian:6 🔍 DaYunCalculator: dy.getXunKong方法存在: true
plugin:bazi-obsidian:6 🔍 DaYunCalculator: 成功获取旬空: 子丑
plugin:bazi-obsidian:6 🔍 DaYunCalculator: 尝试获取大运旬空，干支: 丁巳
plugin:bazi-obsidian:6 🔍 DaYunCalculator: dy对象: h0 {_startYear: 2034, _endYear: 2043, _startAge: 48, _endAge: 57, _index: 5, …}
plugin:bazi-obsidian:6 🔍 DaYunCalculator: dy.getXunKong方法存在: true
plugin:bazi-obsidian:6 🔍 DaYunCalculator: 成功获取旬空: 子丑
plugin:bazi-obsidian:6 🔍 DaYunCalculator: 尝试获取大运旬空，干支: 戊午
plugin:bazi-obsidian:6 🔍 DaYunCalculator: dy对象: h0 {_startYear: 2044, _endYear: 2053, _startAge: 58, _endAge: 67, _index: 6, …}
plugin:bazi-obsidian:6 🔍 DaYunCalculator: dy.getXunKong方法存在: true
plugin:bazi-obsidian:6 🔍 DaYunCalculator: 成功获取旬空: 子丑
plugin:bazi-obsidian:6 🔍 DaYunCalculator: 尝试获取大运旬空，干支: 己未
plugin:bazi-obsidian:6 🔍 DaYunCalculator: dy对象: h0 {_startYear: 2054, _endYear: 2063, _startAge: 68, _endAge: 77, _index: 7, …}
plugin:bazi-obsidian:6 🔍 DaYunCalculator: dy.getXunKong方法存在: true
plugin:bazi-obsidian:6 🔍 DaYunCalculator: 成功获取旬空: 子丑
plugin:bazi-obsidian:6 🔍 DaYunCalculator: 尝试获取大运旬空，干支: 庚申
plugin:bazi-obsidian:6 🔍 DaYunCalculator: dy对象: h0 {_startYear: 2064, _endYear: 2073, _startAge: 78, _endAge: 87, _index: 8, …}
plugin:bazi-obsidian:6 🔍 DaYunCalculator: dy.getXunKong方法存在: true
plugin:bazi-obsidian:6 🔍 DaYunCalculator: 成功获取旬空: 子丑
plugin:bazi-obsidian:6 🔍 DaYunCalculator: 尝试获取大运旬空，干支: 辛酉
plugin:bazi-obsidian:6 🔍 DaYunCalculator: dy对象: h0 {_startYear: 2074, _endYear: 2083, _startAge: 88, _endAge: 97, _index: 9, …}
plugin:bazi-obsidian:6 🔍 DaYunCalculator: dy.getXunKong方法存在: true
plugin:bazi-obsidian:6 🔍 DaYunCalculator: 成功获取旬空: 子丑
plugin:bazi-obsidian:7 🔥 ✅ formatBaziInfo已使用虚拟八字对象，计算完成
plugin:bazi-obsidian:1021 🔥🔥🔥🔥🔥 BaziService.parseBaziString 返回结果: {solarDate: '1987-12-17', lunarDate: '一九八七年十月廿七', solarTime: '00:00', yearPillar: '丁卯', yearStem: '丁', …}
plugin:bazi-obsidian:1021 🔥 返回结果中的 wuXingStrength: {jin: 6, mu: 11.6, shui: 87.75, huo: 8.8, tu: 0.9, …}
plugin:bazi-obsidian:1021 🎨 开始渲染八字命盘
plugin:bazi-obsidian:1033 🎨 插件完整设置: {defaultDisplayStyle: 'standard', debugMode: true, autoUpdateCodeBlock: true, codeBlockUpdateDelay: 500, baziSect: '1', …}
plugin:bazi-obsidian:1033 🎨 插件神煞设置: {siZhu: true, daYun: true, liuNian: true, xiaoYun: true, liuYue: true}
plugin:bazi-obsidian:1033 🎨 传递神煞显示设置到baziInfo: {siZhu: true, daYun: true, liuNian: true, xiaoYun: true, liuYue: true}
plugin:bazi-obsidian:1033 🎨 baziInfo完整内容: {solarDate: '1987-12-17', lunarDate: '一九八七年十月廿七', solarTime: '00:00', yearPillar: '丁卯', yearStem: '丁', …}
plugin:bazi-obsidian:1033 🎨 使用显示样式: complete
plugin:bazi-obsidian:318 🎯 InteractiveBaziView构造函数开始
plugin:bazi-obsidian:318 🎯 接收到的baziInfo.showShenSha: {siZhu: true, daYun: true, liuNian: true, xiaoYun: true, liuYue: true}
plugin:bazi-obsidian:318 🎯 使用传递的神煞显示设置: {siZhu: true, daYun: true, liuNian: true, xiaoYun: true, liuYue: true}
plugin:bazi-obsidian:318 🎯 各项设置详情:
plugin:bazi-obsidian:318   - siZhu: true
plugin:bazi-obsidian:318   - daYun: true
plugin:bazi-obsidian:318   - liuNian: true
plugin:bazi-obsidian:318   - xiaoYun: true
plugin:bazi-obsidian:318   - liuYue: true
plugin:bazi-obsidian:332 处理神煞: 年柱:桃花 清理后: 桃花
plugin:bazi-obsidian:332 神煞信息: 桃花 类型: 吉凶神
plugin:bazi-obsidian:332 处理神煞: 年柱:月德 清理后: 月德
plugin:bazi-obsidian:332 神煞信息: 月德 类型: 吉神
plugin:bazi-obsidian:332 处理神煞: 年柱:天医 清理后: 天医
plugin:bazi-obsidian:332 神煞信息: 天医 类型: 吉神
plugin:bazi-obsidian:332 处理神煞: 年柱:红艳 清理后: 红艳
plugin:bazi-obsidian:332 未找到神煞信息: 红艳
plugin:bazi-obsidian:332 处理神煞: 年柱:灾煞 清理后: 灾煞
plugin:bazi-obsidian:332 未找到神煞信息: 灾煞
plugin:bazi-obsidian:332 处理神煞: 月柱:桃花 清理后: 桃花
plugin:bazi-obsidian:332 神煞信息: 桃花 类型: 吉凶神
plugin:bazi-obsidian:332 处理神煞: 月柱:天德合 清理后: 天德合
plugin:bazi-obsidian:332 未找到神煞信息: 天德合
plugin:bazi-obsidian:332 处理神煞: 月柱:天医 清理后: 天医
plugin:bazi-obsidian:332 神煞信息: 天医 类型: 吉神
plugin:bazi-obsidian:332 处理神煞: 月柱:劫煞 清理后: 劫煞
plugin:bazi-obsidian:332 未找到神煞信息: 劫煞
plugin:bazi-obsidian:332 处理神煞: 日柱:桃花 清理后: 桃花
plugin:bazi-obsidian:332 神煞信息: 桃花 类型: 吉凶神
plugin:bazi-obsidian:332 处理神煞: 日柱:月德 清理后: 月德
plugin:bazi-obsidian:332 神煞信息: 月德 类型: 吉神
plugin:bazi-obsidian:332 处理神煞: 日柱:天医 清理后: 天医
plugin:bazi-obsidian:332 神煞信息: 天医 类型: 吉神
plugin:bazi-obsidian:332 处理神煞: 日柱:劫煞 清理后: 劫煞
plugin:bazi-obsidian:332 未找到神煞信息: 劫煞
plugin:bazi-obsidian:332 处理神煞: 时柱:桃花 清理后: 桃花
plugin:bazi-obsidian:332 神煞信息: 桃花 类型: 吉凶神
plugin:bazi-obsidian:332 处理神煞: 时柱:月德 清理后: 月德
plugin:bazi-obsidian:332 神煞信息: 月德 类型: 吉神
plugin:bazi-obsidian:332 处理神煞: 时柱:天医 清理后: 天医
plugin:bazi-obsidian:332 神煞信息: 天医 类型: 吉神
plugin:bazi-obsidian:332 处理神煞: 时柱:劫煞 清理后: 劫煞
plugin:bazi-obsidian:332 未找到神煞信息: 劫煞
plugin:bazi-obsidian:332 🎯 大运信息区域已创建
plugin:bazi-obsidian:332 🎯 显示大运神煞行
plugin:bazi-obsidian:332 🎯 流年信息区域已创建
plugin:bazi-obsidian:332 🎯 没有流月数据，但会在选择流年时动态生成
plugin:bazi-obsidian:332 🎯 流月信息区域已创建
plugin:bazi-obsidian:332 小运年份范围: 1987 - 1993
plugin:bazi-obsidian:332 大运干支无效: 
plugin:bazi-obsidian:332 生成小运数据: []
plugin:bazi-obsidian:332 🎯 显示流年神煞行
plugin:bazi-obsidian:332 流月 正月 (壬寅) 神煞应从后端获取
plugin:bazi-obsidian:332 流月 二月 (癸卯) 神煞应从后端获取
plugin:bazi-obsidian:332 流月 三月 (甲辰) 神煞应从后端获取
plugin:bazi-obsidian:332 流月 四月 (乙巳) 神煞应从后端获取
plugin:bazi-obsidian:332 流月 五月 (丙午) 神煞应从后端获取
plugin:bazi-obsidian:332 流月 六月 (丁未) 神煞应从后端获取
plugin:bazi-obsidian:332 流月 七月 (戊申) 神煞应从后端获取
plugin:bazi-obsidian:332 流月 八月 (己酉) 神煞应从后端获取
plugin:bazi-obsidian:332 流月 九月 (庚戌) 神煞应从后端获取
plugin:bazi-obsidian:332 流月 十月 (辛亥) 神煞应从后端获取
plugin:bazi-obsidian:332 流月 冬月 (壬子) 神煞应从后端获取
plugin:bazi-obsidian:332 流月 腊月 (癸丑) 神煞应从后端获取
plugin:bazi-obsidian:1033 ✅ 八字命盘渲染完成
plugin:bazi-obsidian:1021 ✅ 已有年份参数: 1987
plugin:bazi-obsidian:1021 ✅ 不需要显示性别选择界面，参数: 女
app.js:1 [Violation] 'setTimeout' handler took 55ms
