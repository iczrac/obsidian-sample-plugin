plugin:bazi-obsidian:1832 🎯 bazi代码块被触发!
plugin:bazi-obsidian:1832 🔍 处理八字代码块开始
plugin:bazi-obsidian:1832 📝 源代码内容: bazi: 乙丑 壬午 丙午 癸巳

year: 1985
gender: 男
style: 3
plugin:bazi-obsidian:1832 ⚙️ 解析后的参数: {bazi: '乙丑 壬午 丙午 癸巳', year: '1985', gender: '男', style: '3'}
plugin:bazi-obsidian:1833 🔥🔥🔥🔥🔥 调用 BaziService.parseBaziString
plugin:bazi-obsidian:1833 🔥 参数 bazi: 乙丑 壬午 丙午 癸巳
plugin:bazi-obsidian:1833 🔥 参数 year: 1985
plugin:bazi-obsidian:1833 🔥 参数 gender: 1
plugin:bazi-obsidian:1833 🔥 参数 qiYunSect: 2
plugin:bazi-obsidian:21 🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥 BaziService.parseBaziString 开始 🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥
plugin:bazi-obsidian:21 🔥 ========== BaziService.parseBaziString 开始 ==========
plugin:bazi-obsidian:21 🔥 输入参数:
plugin:bazi-obsidian:21   - baziStr: 乙丑 壬午 丙午 癸巳
plugin:bazi-obsidian:21   - specifiedYear: 1985
plugin:bazi-obsidian:21   - gender: 1
plugin:bazi-obsidian:21   - sect: 1
plugin:bazi-obsidian:21 🔥 八字分割结果: (4) ['乙丑', '壬午', '丙午', '癸巳']
plugin:bazi-obsidian:21 🔍 年份匹配计算参数: {yearStem: '乙', yearBranch: '丑', monthStem: '壬', monthBranch: '午', dayStem: '丙', …}
plugin:bazi-obsidian:20 🔍 使用完整八字反推年份: {yearPillar: '乙丑', monthPillar: '壬午', dayPillar: '丙午', timePillar: '癸巳', sect: 1, …}
plugin:bazi-obsidian:20 ✅ 使用lunar-typescript库获取匹配年份: (19) [5, 65, 125, 245, 305, 365, 545, 605, 785, 845, 1025, 1085, 1265, 1325, 1505, 1565, 1745, 1805, 1985]
plugin:bazi-obsidian:21 🔥 尝试日期反推，年份: 1985
plugin:bazi-obsidian:21 🔥 匹配年份列表: (19) [5, 65, 125, 245, 305, 365, 545, 605, 785, 845, 1025, 1085, 1265, 1325, 1505, 1565, 1745, 1805, 1985]
plugin:bazi-obsidian:21 🔥 年份是否在匹配列表中: true
 🔥 fromBaZi返回的日期数量: 19
 🔥 检查日期: 5 7 8
 🔥 检查日期: 65 6 23
 🔥 检查日期: 125 6 8
 🔥 检查日期: 245 7 8
 🔥 检查日期: 305 6 23
 🔥 检查日期: 365 6 8
 🔥 检查日期: 545 6 23
 🔥 检查日期: 605 6 8
 🔥 检查日期: 785 6 23
 🔥 检查日期: 845 6 8
 🔥 检查日期: 1025 6 23
 🔥 检查日期: 1085 6 8
 🔥 检查日期: 1265 6 23
 🔥 检查日期: 1325 6 8
 🔥 检查日期: 1505 6 23
 🔥 检查日期: 1565 6 8
 🔥 检查日期: 1745 7 4
 🔥 检查日期: 1805 6 20
 🔥 检查日期: 1985 7 6
 🔥 ✅ 日期反推成功 - 指定年份: 1985
 🔥 ✅ 日期反推结果 - 阳历日期: 1985-07-06
 🔥 ✅ 日期反推结果 - 农历日期: 一九八五年五月十九
 🔥 formatBaziInfo路径：传递用户输入八字信息
 🎯 身宫计算结果: 戊子
 🎯 格局计算结果: {geJu: '七杀格', geJuType: '正格', detail: '月令七杀，需制化', geJuStrength: 7, isSpecialGeJu: false, …}
 🚀🚀🚀 formatBaziInfo: 开始独立五行强度计算
 🔍 formatBaziInfo使用用户输入八字进行独立计算
 🔍 formatBaziInfo当前八字: {year: '乙丑', month: '壬午', day: '丙午', time: '癸巳'}
 🚀🚀🚀🚀🚀🚀🚀🚀🚀🚀 WuXingStrengthCalculator.calculateWuXingStrengthFromBazi 开始 🚀🚀🚀🚀🚀🚀🚀🚀🚀🚀
 🔍 独立计算八字: 乙丑 壬午 丙午 癸巳
 🚀🚀🚀🚀🚀🚀🚀🚀🚀🚀 WuXingStrengthCalculator.calculateWuXingStrength 开始 🚀🚀🚀🚀🚀🚀🚀🚀🚀🚀
 🚀 开始计算五行强度 - WuXingStrengthCalculator.calculateWuXingStrengthWithDetails
 🔍 调用者: at Pe.calculateWuXingStrengthFromBazi (plugin:bazi-obsidian:21:11723)
 🔍 调用时间: 2025-06-16T13:18:52.907Z
 🔍 八字: 乙丑 壬午 丙午 癸巳
 🔍 天干: 年干乙(木)=2
 🔍 天干: 月干壬(水)=4
 🔍 地支丑藏干: 己,癸,辛, 权重分配: 0.6,0.3,0.1
 🔍   己(土) 本气: 2 × 0.6 = 1.20
 🔍   癸(水) 中气: 2 × 0.3 = 0.60
 🔍   辛(金) 余气: 2 × 0.1 = 0.20
 🔍 地支午藏干: 丁,己, 权重分配: 0.7,0.3
 🔍   丁(火) 本气: 8 × 0.7 = 5.60
 🔍   己(土) 中气: 8 × 0.3 = 2.40
 🔍 地支午藏干: 丁,己, 权重分配: 0.7,0.3
 🔍   丁(火) 本气: 5 × 0.7 = 3.50
 🔍   己(土) 中气: 5 × 0.3 = 1.50
 🔍 地支巳藏干: 丙,庚,戊, 权重分配: 0.6,0.3,0.1
 🔍   丙(火) 本气: 5 × 0.6 = 3.00
 🔍   庚(金) 中气: 5 × 0.3 = 1.50
 🔍   戊(土) 余气: 5 × 0.1 = 0.50
 🔍 季节调整: 月支=午, 季节=夏
 🔍 基础强度: 金=2.7, 木=4, 水=14.6, 火=54.1, 土=9.6
 🔍 火季节调整: 基础=54.10, 系数=1.5, 调整后=81.15, 调整量=27.05
 🔍 土季节调整: 基础=9.60, 系数=1.2, 调整后=11.52, 调整量=1.92
 🔍 木季节调整: 基础=4.00, 系数=1, 调整后=4.00, 调整量=0.00
 🔍 水季节调整: 基础=14.60, 系数=0.8, 调整后=11.68, 调整量=-2.92
 🔍 金季节调整: 基础=2.70, 系数=0.6, 调整后=1.62, 调整量=-1.08
 🎯🎯🎯🎯🎯 WuXingStrengthCalculator.calculateWuXingStrength 返回结果:
 🎯 金: 1.62
 🎯 木: 4
 🎯 水: 11.68
 🎯 火: 81.15
 🎯 土: 11.52
 🎯 是否有详细信息: true
 🎯 详细信息: {jin: {…}, mu: {…}, shui: {…}, huo: {…}, tu: {…}, …}
 🎯🎯🎯 formatBaziInfo: 五行强度计算结果: {jin: 1.62, mu: 4, shui: 11.68, huo: 81.15, tu: 11.52, …}
 🔍🔍🔍 formatBaziInfo: 土五行强度 = 11.52
 🔍🔍🔍 formatBaziInfo: 是否有详细信息 = true
 🔍 calculateRiZhuStrength: 使用已提供的五行强度，避免重复计算
 🎯 日主旺衰计算结果: {result: '身旺', details: {…}}
 🔍 QiYunCalculator.calculateQiYun: 开始计算起运，性别=1, 流派=2
 ✅ QiYunCalculator.calculateQiYun: 计算完成 {startYear: 10, startMonth: 1, startDay: 10, startHour: 2, startSolar: '1995-08-16', …}
 ✅ QiYunCalculator: 起运信息计算完成 {startYear: 10, startMonth: 1, startDay: 10, startHour: 2, startDate: '1995-08-16', …}
 🔍 DaYunCalculator.calculateDaYun 开始
 🔍 参数: gender = 1 , dayStem = 丙 , count = 10
 🔍 DaYunCalculator: 获取运势对象...
 🔍 DaYunCalculator: 运势对象获取成功: Zn {_gender: 1, _lunar: X, _forward: false, _startYear: 10, _startMonth: 1, …}
 🔍 DaYunCalculator: 获取大运列表...
 🔍 DaYunCalculator: 大运列表获取成功，数量: 10
plugin:bazi-obsidian:20 🔍 DaYunCalculator: 发现前运期间，索引: 0（还未排上大运）
plugin:bazi-obsidian:20 🔍 DaYunCalculator.calculateQianYun: 开始计算前运，当前索引=0
plugin:bazi-obsidian:20 🔍 calculateQianYun: 找到第一个有效大运[1]: 辛巳
plugin:bazi-obsidian:20 🔍 calculateQianYun: 年干=乙丑, 阳年=false, 性别=男, 顺行=false
plugin:bazi-obsidian:20 🔍 calculateGanZhiStepsBack: 辛巳 逆行 前推1步 → 壬午
plugin:bazi-obsidian:20 ✅ calculateQianYun: 前运干支=壬午
plugin:bazi-obsidian:20 ✅ DaYunCalculator: 前运计算成功: 壬午
plugin:bazi-obsidian:20 🔍 DaYunCalculator: 尝试获取大运旬空，干支: 辛巳
plugin:bazi-obsidian:20 🔍 DaYunCalculator: dy对象: Hn {_startYear: 1995, _endYear: 2004, _startAge: 11, _endAge: 20, _index: 1, …}
plugin:bazi-obsidian:20 🔍 DaYunCalculator: dy.getXunKong方法存在: true
plugin:bazi-obsidian:20 🔍 DaYunCalculator: 成功获取旬空: 申酉
plugin:bazi-obsidian:20 🔍 DaYunCalculator: 尝试获取大运旬空，干支: 庚辰
plugin:bazi-obsidian:20 🔍 DaYunCalculator: dy对象: Hn {_startYear: 2005, _endYear: 2014, _startAge: 21, _endAge: 30, _index: 2, …}
plugin:bazi-obsidian:20 🔍 DaYunCalculator: dy.getXunKong方法存在: true
plugin:bazi-obsidian:20 🔍 DaYunCalculator: 成功获取旬空: 申酉
plugin:bazi-obsidian:20 🔍 DaYunCalculator: 尝试获取大运旬空，干支: 己卯
plugin:bazi-obsidian:20 🔍 DaYunCalculator: dy对象: Hn {_startYear: 2015, _endYear: 2024, _startAge: 31, _endAge: 40, _index: 3, …}
plugin:bazi-obsidian:20 🔍 DaYunCalculator: dy.getXunKong方法存在: true
plugin:bazi-obsidian:20 🔍 DaYunCalculator: 成功获取旬空: 申酉
plugin:bazi-obsidian:20 🔍 DaYunCalculator: 尝试获取大运旬空，干支: 戊寅
plugin:bazi-obsidian:20 🔍 DaYunCalculator: dy对象: Hn {_startYear: 2025, _endYear: 2034, _startAge: 41, _endAge: 50, _index: 4, …}
plugin:bazi-obsidian:20 🔍 DaYunCalculator: dy.getXunKong方法存在: true
plugin:bazi-obsidian:20 🔍 DaYunCalculator: 成功获取旬空: 申酉
plugin:bazi-obsidian:20 🔍 DaYunCalculator: 尝试获取大运旬空，干支: 丁丑
plugin:bazi-obsidian:20 🔍 DaYunCalculator: dy对象: Hn {_startYear: 2035, _endYear: 2044, _startAge: 51, _endAge: 60, _index: 5, …}
plugin:bazi-obsidian:20 🔍 DaYunCalculator: dy.getXunKong方法存在: true
plugin:bazi-obsidian:20 🔍 DaYunCalculator: 成功获取旬空: 申酉
plugin:bazi-obsidian:20 🔍 DaYunCalculator: 尝试获取大运旬空，干支: 丙子
plugin:bazi-obsidian:20 🔍 DaYunCalculator: dy对象: Hn {_startYear: 2045, _endYear: 2054, _startAge: 61, _endAge: 70, _index: 6, …}
plugin:bazi-obsidian:20 🔍 DaYunCalculator: dy.getXunKong方法存在: true
plugin:bazi-obsidian:20 🔍 DaYunCalculator: 成功获取旬空: 申酉
plugin:bazi-obsidian:20 🔍 DaYunCalculator: 尝试获取大运旬空，干支: 乙亥
plugin:bazi-obsidian:20 🔍 DaYunCalculator: dy对象: Hn {_startYear: 2055, _endYear: 2064, _startAge: 71, _endAge: 80, _index: 7, …}
plugin:bazi-obsidian:20 🔍 DaYunCalculator: dy.getXunKong方法存在: true
plugin:bazi-obsidian:20 🔍 DaYunCalculator: 成功获取旬空: 申酉
plugin:bazi-obsidian:20 🔍 DaYunCalculator: 尝试获取大运旬空，干支: 甲戌
plugin:bazi-obsidian:20 🔍 DaYunCalculator: dy对象: Hn {_startYear: 2065, _endYear: 2074, _startAge: 81, _endAge: 90, _index: 8, …}
plugin:bazi-obsidian:20 🔍 DaYunCalculator: dy.getXunKong方法存在: true
plugin:bazi-obsidian:20 🔍 DaYunCalculator: 成功获取旬空: 申酉
plugin:bazi-obsidian:20 🔍 DaYunCalculator: 尝试获取大运旬空，干支: 癸酉
plugin:bazi-obsidian:20 🔍 DaYunCalculator: dy对象: Hn {_startYear: 2075, _endYear: 2084, _startAge: 91, _endAge: 100, _index: 9, …}
plugin:bazi-obsidian:20 🔍 DaYunCalculator: dy.getXunKong方法存在: true
plugin:bazi-obsidian:20 🔍 DaYunCalculator: 成功获取旬空: 戌亥
plugin:bazi-obsidian:20 🎯 XiaoYunCalculator.calculateXiaoYun: 开始计算 {gender: '1', dayStem: '丙', startYear: 1985, count: 10}
plugin:bazi-obsidian:20 🎯 小运推算参数: {timeGan: '癸', timeZhi: '巳', yearGan: '乙', isYangYear: false, isShunXing: '逆行'}
plugin:bazi-obsidian:20 🎯 小运 1岁 (1985年): 壬辰
plugin:bazi-obsidian:20 🎯 小运 2岁 (1986年): 辛卯
plugin:bazi-obsidian:20 🎯 小运 3岁 (1987年): 庚寅
plugin:bazi-obsidian:20 🎯 小运 4岁 (1988年): 己丑
plugin:bazi-obsidian:20 🎯 小运 5岁 (1989年): 戊子
plugin:bazi-obsidian:20 🎯 小运 6岁 (1990年): 丁亥
plugin:bazi-obsidian:20 🎯 小运 7岁 (1991年): 丙戌
plugin:bazi-obsidian:20 🎯 小运 8岁 (1992年): 乙酉
plugin:bazi-obsidian:20 🎯 小运 9岁 (1993年): 甲申
plugin:bazi-obsidian:20 🎯 小运 10岁 (1994年): 癸未
plugin:bazi-obsidian:20 ✅ XiaoYunCalculator.calculateXiaoYun: 计算完成，共10个小运
plugin:bazi-obsidian:21 🔥 ✅ formatBaziInfo已使用虚拟八字对象，计算完成
plugin:bazi-obsidian:1833 🔥🔥🔥🔥🔥 BaziService.parseBaziString 返回结果: {solarDate: '1985-07-06', lunarDate: '一九八五年五月十九', solarTime: '10:00', yearPillar: '乙丑', yearStem: '乙', …}
plugin:bazi-obsidian:1833 🔥 返回结果中的 wuXingStrength: {jin: 1.62, mu: 4, shui: 11.68, huo: 81.15, tu: 11.52, …}
plugin:bazi-obsidian:1833 🎨 开始渲染八字命盘
plugin:bazi-obsidian:1845 🎨 插件完整设置: {defaultDisplayStyle: 'standard', debugMode: true, autoUpdateCodeBlock: true, codeBlockUpdateDelay: 500, baziSect: '1', …}
plugin:bazi-obsidian:1845 🎨 插件神煞设置: {siZhu: true, daYun: true, liuNian: true, xiaoYun: true, liuYue: true}
plugin:bazi-obsidian:1845 🎨 传递神煞显示设置到baziInfo: {siZhu: true, daYun: true, liuNian: true, xiaoYun: true, liuYue: true}
plugin:bazi-obsidian:1845 🎨 baziInfo完整内容: {solarDate: '1985-07-06', lunarDate: '一九八五年五月十九', solarTime: '10:00', yearPillar: '乙丑', yearStem: '乙', …}
plugin:bazi-obsidian:1845 🎨 使用显示样式: complete
plugin:bazi-obsidian:1294 🎯 InteractiveBaziView构造函数开始
plugin:bazi-obsidian:1294 🎯 接收到的baziInfo.showShenSha: {siZhu: true, daYun: true, liuNian: true, xiaoYun: true, liuYue: true}
plugin:bazi-obsidian:1294 🎯 使用传递的神煞显示设置: {siZhu: true, daYun: true, liuNian: true, xiaoYun: true, liuYue: true}
plugin:bazi-obsidian:1294 ✅ 所有功能组件初始化完成
plugin:bazi-obsidian:310 🔍🔍🔍 BaziTableManager 十神数据检查开始 🔍🔍🔍
plugin:bazi-obsidian:310 yearShiShenGan: 正印
plugin:bazi-obsidian:310 monthShiShenGan: 七杀
plugin:bazi-obsidian:310 dayShiShen: 日主
plugin:bazi-obsidian:310 dayShiShenGan: undefined
plugin:bazi-obsidian:310 timeShiShenGan: 正官
plugin:bazi-obsidian:310 🔍🔍🔍 BaziTableManager 十神数据检查结束 🔍🔍🔍
plugin:bazi-obsidian:310 🔍 BaziTableManager 地势数据检查:
plugin:bazi-obsidian:310 yearDiShi: 养
plugin:bazi-obsidian:310 monthDiShi: 帝旺
plugin:bazi-obsidian:310 dayDiShi: 帝旺
plugin:bazi-obsidian:310 timeDiShi: 临官
plugin:bazi-obsidian:1319 ✅ 八字表格创建完成
plugin:bazi-obsidian:1044 ✅ 流年信息管理器创建完成
plugin:bazi-obsidian:1319 ✅ 大运信息创建完成
plugin:bazi-obsidian:930 🎯 getCurrentDaYunLiuNian: 获取大运0的流年数据
plugin:bazi-obsidian:930 🎯 选中大运: 壬午, 起始年: 1985, 结束年: 1994
plugin:bazi-obsidian:930 ✅ 生成流年数据: 10年，从1985到1994
plugin:bazi-obsidian:1319 ✅ 流年信息创建完成
plugin:bazi-obsidian:1319 ✅ 流月信息创建完成
plugin:bazi-obsidian:1319 ✅ 流日信息创建完成
plugin:bazi-obsidian:1319 ✅ 流时信息创建完成
plugin:bazi-obsidian:732 ✅ 点击交互设置完成
plugin:bazi-obsidian:732 ✅ 悬停交互设置完成
plugin:bazi-obsidian:732 ✅ 键盘交互设置完成
plugin:bazi-obsidian:732 ✅ 自定义事件设置完成
plugin:bazi-obsidian:732 ✅ InteractionManager 初始化完成
plugin:bazi-obsidian:1319 ✅ 事件监听器设置完成
plugin:bazi-obsidian:1319 🎯 选择大运: 0
plugin:bazi-obsidian:334 🚀 extendBaziTableToLevel: 开始扩展到dayun层级
plugin:bazi-obsidian:334 🎯 实际目标层级: dayun (请求层级: dayun)
plugin:bazi-obsidian:334 🔍 大运强制更新检查: lastIndex=-1, currentIndex=0, needsUpdate=true
plugin:bazi-obsidian:334 🔄 强制更新dayun层级内容
plugin:bazi-obsidian:334 🧹 清除现有扩展，当前层级: none
plugin:bazi-obsidian:334 🧹 开始清除扩展列，当前扩展柱数量: 0
plugin:bazi-obsidian:334 ✅ 扩展列清除完成
plugin:bazi-obsidian:334 📋 需要扩展的层级列表: dayun
plugin:bazi-obsidian:334 🔄 正在处理层级: dayun
plugin:bazi-obsidian:334 🔍 getPillarInfoForLevel: dayun
plugin:bazi-obsidian:334 ✅ 获取大运柱信息: 壬午
plugin:bazi-obsidian:334 ✅ 获取到dayun柱信息: 前运 壬午
plugin:bazi-obsidian:334 🔄 添加扩展列: 前运 (壬午)
plugin:bazi-obsidian:334 ✅ 扩展列添加完成: 前运
plugin:bazi-obsidian:334 ✅ 已扩展到dayun层级，包含层级：dayun
plugin:bazi-obsidian:334 📝 更新大运状态跟踪: 0
plugin:bazi-obsidian:992 🎯 LiuNianInfoManager: 设置大运索引 0
plugin:bazi-obsidian:930 🎯 getCurrentDaYunLiuNian: 获取大运0的流年数据
plugin:bazi-obsidian:930 🎯 选中大运: 壬午, 起始年: 1985, 结束年: 1994
plugin:bazi-obsidian:930 ✅ 生成流年数据: 10年，从1985到1994
plugin:bazi-obsidian:1294 ✅ 视图初始化完成
plugin:bazi-obsidian:1845 ✅ 八字命盘渲染完成
plugin:bazi-obsidian:1833 ✅ 已有年份参数: 1985
plugin:bazi-obsidian:1833 ✅ 不需要显示性别选择界面，参数: 男
