# ğŸ”§ ä¿®å¤å’Œæ›´æ–°æ€»ç»“

## âœ… **å·²å®Œæˆçš„ä¿®å¤å’Œæ›´æ–°**

### ğŸ› **ä¿®å¤btoaç¼–ç é”™è¯¯**

**é—®é¢˜ï¼š** éƒ¨åˆ†å…«å­—æ˜¾ç¤ºé”™è¯¯ "Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range."

**åŸå› ï¼š** ä¸­æ–‡å­—ç¬¦æ— æ³•ç›´æ¥ç”¨btoaè¿›è¡Œbase64ç¼–ç 

**è§£å†³æ–¹æ¡ˆï¼š** æ›´æ–° `DoubleLinkTagSettings.ts` ä¸­çš„ `generateBaziId` æ–¹æ³•

```typescript
generateBaziId(baziInfo: any): string {
    const key = `${baziInfo.solarDate || 'unknown'}_${baziInfo.gender || 'unknown'}_${baziInfo.name || 'unnamed'}`;
    
    try {
        // ä½¿ç”¨TextEncoderå¤„ç†UTF-8å­—ç¬¦
        const encoder = new TextEncoder();
        const data = encoder.encode(key);
        const base64 = btoa(String.fromCharCode(...data));
        return base64.replace(/[^a-zA-Z0-9]/g, '').substring(0, 16);
    } catch (error) {
        // å¤‡ç”¨å“ˆå¸Œæ–¹æ³•
        let hash = 0;
        for (let i = 0; i < key.length; i++) {
            const char = key.charCodeAt(i);
            hash = ((hash << 5) - hash) + char;
            hash = hash & hash;
        }
        return Math.abs(hash).toString(36).substring(0, 16);
    }
}
```

**æ•ˆæœï¼š** ç°åœ¨æ”¯æŒåŒ…å«ä¸­æ–‡å§“åçš„å…«å­—ï¼Œä¸å†å‡ºç°ç¼–ç é”™è¯¯

### ğŸ—‘ï¸ **åˆ é™¤æµ‹è¯•å…«å­—å‘½ä»¤**

**æ›´æ–°å†…å®¹ï¼š**
- ä» `CommandManager.ts` ä¸­åˆ é™¤ `registerTestCommand()` æ–¹æ³•
- ä»å‘½ä»¤æ³¨å†Œåˆ—è¡¨ä¸­ç§»é™¤æµ‹è¯•å‘½ä»¤
- æ›´æ–°æ ·æ¿ç¬”è®°ï¼Œåˆ é™¤æµ‹è¯•å‘½ä»¤çš„å¼•ç”¨

**æ›´æ–°å‰ï¼š**
```
- ğŸ§ª æµ‹è¯•å…«å­—æ’ä»¶å‘½ä»¤ - æµ‹è¯•æ’ä»¶æ˜¯å¦æ­£å¸¸å·¥ä½œ
```

**æ›´æ–°åï¼š** å·²åˆ é™¤

### ğŸ¨ **æ›´æ–°å‘½ä»¤emoji**

**æ›´æ–°å†…å®¹ï¼š**

#### **è¾“å…¥æ—¶é—´è½¬å…«å­—å‘½ä»¤**
- **æ›´æ–°å‰ï¼š** `è¾“å…¥æ—¶é—´è½¬å…«å­—`
- **æ›´æ–°åï¼š** `ğŸ“… è¾“å…¥æ—¶é—´è½¬å…«å­—`

#### **è§£æé€‰ä¸­çš„å…«å­—å‘½ä»¤**
- **æ›´æ–°å‰ï¼š** `è§£æé€‰ä¸­çš„å…«å­—`
- **æ›´æ–°åï¼š** `ğŸ” è§£æé€‰ä¸­çš„å…«å­—`

#### **åˆ›å»ºæ ·æ¿ç¬”è®°å‘½ä»¤**
- **ä¿æŒä¸å˜ï¼š** `ğŸ“ åˆ›å»ºå…«å­—æ ·æ¿ç¬”è®°`

### ğŸ“ **æ›´æ–°æ ·æ¿ç¬”è®°å†…å®¹**

**ä¸»è¦æ›´æ–°ï¼š**

#### **1. åŒé“¾å’Œæ ‡ç­¾åŠŸèƒ½éƒ¨åˆ†**
- æ·»åŠ äº†æ™ºèƒ½åŒé“¾å’Œæ ‡ç­¾ç”Ÿæˆçš„è¯¦ç»†è¯´æ˜
- æä¾›äº†å…·ä½“çš„ä½¿ç”¨æ¡ˆä¾‹ï¼ˆæ¯›æ³½ä¸œã€é©¬äº‘ï¼‰
- å±•ç¤ºäº†è‡ªåŠ¨ç”Ÿæˆçš„åŒé“¾å’Œæ ‡ç­¾æ•ˆæœ
- æ·»åŠ äº†é…ç½®è¯´æ˜å’Œå·¥å…·æ ä½¿ç”¨æŒ‡å—

#### **2. åˆ é™¤è¿‡æ—¶å†…å®¹**
- ç§»é™¤äº†æµ‹è¯•å‘½ä»¤çš„å¼•ç”¨
- æ›´æ–°äº†å‘½ä»¤åˆ—è¡¨ï¼Œåªä¿ç•™å®ç”¨çš„å‘½ä»¤

#### **3. å¢å¼ºå®ç”¨æ€§**
- æ·»åŠ äº†æ›´å¤šå®é™…ä½¿ç”¨åœºæ™¯
- æä¾›äº†é…ç½®åŒé“¾å’Œæ ‡ç­¾çš„å…·ä½“æ­¥éª¤
- è¯´æ˜äº†å·¥å…·æ å„æŒ‰é’®çš„åŠŸèƒ½

## ğŸ¯ **æ›´æ–°åçš„å‘½ä»¤åˆ—è¡¨**

ç°åœ¨æ’ä»¶åŒ…å«ä»¥ä¸‹å‘½ä»¤ï¼š

### **ğŸ“… è¾“å…¥æ—¶é—´è½¬å…«å­—**
- **åŠŸèƒ½ï¼š** é€šè¿‡æ—¥æœŸé€‰æ‹©å™¨åˆ›å»ºå…«å­—ä»£ç å—
- **ä½¿ç”¨ï¼š** `Ctrl+P` â†’ æœç´¢ "è¾“å…¥æ—¶é—´è½¬å…«å­—"
- **æ•ˆæœï¼š** æ‰“å¼€æ—¥æœŸé€‰æ‹©å™¨ï¼Œé€‰æ‹©æ—¥æœŸåè‡ªåŠ¨æ’å…¥å…«å­—ä»£ç å—

### **ğŸ” è§£æé€‰ä¸­çš„å…«å­—**
- **åŠŸèƒ½ï¼š** å°†é€‰ä¸­çš„å…«å­—æ–‡æœ¬è½¬æ¢ä¸ºä»£ç å—
- **ä½¿ç”¨ï¼š** é€‰ä¸­å…«å­—æ–‡æœ¬ â†’ `Ctrl+P` â†’ æœç´¢ "è§£æé€‰ä¸­çš„å…«å­—"
- **æ•ˆæœï¼š** è‡ªåŠ¨å°†æ–‡æœ¬è½¬æ¢ä¸ºæ ‡å‡†çš„å…«å­—ä»£ç å—æ ¼å¼

### **ğŸ“ åˆ›å»ºå…«å­—æ ·æ¿ç¬”è®°**
- **åŠŸèƒ½ï¼š** åˆ›å»ºåŒ…å«å„ç§åŠŸèƒ½ç¤ºä¾‹çš„å­¦ä¹ æ ·æ¿
- **ä½¿ç”¨ï¼š** `Ctrl+P` â†’ æœç´¢ "åˆ›å»ºå…«å­—æ ·æ¿ç¬”è®°"
- **æ•ˆæœï¼š** åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„å­¦ä¹ æ ·æ¿æ–‡ä»¶

## ğŸ”— **åŒé“¾å’Œæ ‡ç­¾åŠŸèƒ½å±•ç¤º**

### **æ™ºèƒ½ç”Ÿæˆç¤ºä¾‹**

#### **æ”¿æ²»å®¶æ¡ˆä¾‹**
```bazi
date: 1893-12-26 07:30
gender: ç”·
name: æ¯›æ³½ä¸œ
```

**è‡ªåŠ¨ç”Ÿæˆï¼š**
- **åŒé“¾ï¼š** `[[æ¯›æ³½ä¸œ]]` `[[å¤©ä¹™è´µäºº]]` `[[æ–‡æ˜Œ]]`
- **æ ‡ç­¾ï¼š** `#æ”¿æ²»å®¶` `#ç™¸æ°´æ—¥ä¸»æ—º` `#æ­£å®˜æ ¼`

#### **ä¼ä¸šå®¶æ¡ˆä¾‹**
```bazi
date: 1964-09-10 14:30
gender: ç”·
name: é©¬äº‘
```

**è‡ªåŠ¨ç”Ÿæˆï¼š**
- **åŒé“¾ï¼š** `[[é©¬äº‘]]` `[[æ¡ƒèŠ±]]` `[[é©¿é©¬]]`
- **æ ‡ç­¾ï¼š** `#ä¼ä¸šå®¶` `#ç”²æœ¨æ—¥ä¸»å¼±` `#åè´¢æ ¼` `#60å`

### **å·¥å…·æ åŠŸèƒ½**

å½“å…«å­—åŒ…å«å§“åæ—¶ï¼Œè‡ªåŠ¨æ˜¾ç¤ºå·¥å…·æ ï¼š

```
ğŸ”— [å§“å] åŒé“¾åŠŸèƒ½
[ğŸ”— ç›¸å…³é“¾æ¥] [ğŸ‘¤ å§“å] [ğŸ“š çŸ¥è¯†åº“] [âš™ï¸ é…ç½®]
```

- **ğŸ”— ç›¸å…³é“¾æ¥** - æŸ¥çœ‹æ™ºèƒ½ç”Ÿæˆçš„åŒé“¾å’Œæ ‡ç­¾
- **ğŸ‘¤ [å§“å]** - åˆ›å»ºæˆ–æ‰“å¼€ä¸ªäººæ¡£æ¡ˆ
- **ğŸ“š çŸ¥è¯†åº“** - ä¸€é”®åˆ›å»ºå®Œæ•´çŸ¥è¯†åº“
- **âš™ï¸ é…ç½®** - è®¾ç½®åŒé“¾æ ‡ç­¾è§„åˆ™

## ğŸ¨ **æ ·æ¿ç¬”è®°æ›´æ–°äº®ç‚¹**

### **1. æ›´å®ç”¨çš„ç¤ºä¾‹**
- æä¾›äº†çœŸå®çš„å†å²äººç‰©æ¡ˆä¾‹
- å±•ç¤ºäº†ä¸åŒèŒä¸šç±»å‹çš„æ ‡ç­¾ç”Ÿæˆ
- åŒ…å«äº†å®Œæ•´çš„ä½¿ç”¨æµç¨‹è¯´æ˜

### **2. è¯¦ç»†çš„åŠŸèƒ½è¯´æ˜**
- åŒé“¾å’Œæ ‡ç­¾çš„åŒºåˆ«å’Œç”¨é€”
- é…ç½®æ–¹æ³•çš„å…·ä½“æ­¥éª¤
- å·¥å…·æ å„åŠŸèƒ½çš„è¯¦ç»†ä»‹ç»

### **3. å­¦ä¹ å¯¼å‘**
- ä»åŸºç¡€åˆ°é«˜çº§çš„æ¸è¿›å¼å­¦ä¹ è·¯å¾„
- å®è·µç»ƒä¹ çš„å…·ä½“å»ºè®®
- ç¬”è®°æ•´ç†çš„æœ€ä½³å®è·µ

## ğŸ‰ **æ€»ç»“**

### **ä¿®å¤æˆæœ**
âœ… **ç¼–ç é”™è¯¯ä¿®å¤** - æ”¯æŒä¸­æ–‡å§“åï¼Œä¸å†å‡ºç°btoaé”™è¯¯
âœ… **å‘½ä»¤æ¸…ç†** - åˆ é™¤æµ‹è¯•å‘½ä»¤ï¼Œä¿æŒç•Œé¢ç®€æ´
âœ… **ç•Œé¢ä¼˜åŒ–** - æ·»åŠ emojiï¼Œæå‡ç”¨æˆ·ä½“éªŒ
âœ… **æ–‡æ¡£æ›´æ–°** - æ ·æ¿ç¬”è®°æ›´åŠ å®ç”¨å’Œè¯¦ç»†

### **ç”¨æˆ·ä½“éªŒæå‡**
ğŸ¯ **æ›´ç¨³å®š** - ä¿®å¤äº†ä¸­æ–‡å­—ç¬¦ç¼–ç é—®é¢˜
ğŸ¯ **æ›´ç®€æ´** - åˆ é™¤äº†ä¸å¿…è¦çš„æµ‹è¯•å‘½ä»¤
ğŸ¯ **æ›´ç›´è§‚** - å‘½ä»¤åç§°æ·»åŠ äº†emojiå›¾æ ‡
ğŸ¯ **æ›´å®ç”¨** - æ ·æ¿ç¬”è®°åŒ…å«äº†æ›´å¤šå®é™…æ¡ˆä¾‹

### **åŠŸèƒ½å®Œæ•´æ€§**
ğŸ”— **åŒé“¾åŠŸèƒ½** - å®Œæ•´çš„æ™ºèƒ½åŒé“¾ç”Ÿæˆç³»ç»Ÿ
ğŸ·ï¸ **æ ‡ç­¾åŠŸèƒ½** - å¤šç»´åº¦çš„æ™ºèƒ½æ ‡ç­¾åˆ†ç±»
âš™ï¸ **é…ç½®ç³»ç»Ÿ** - çµæ´»çš„å…¨å±€å’Œå•ç‹¬é…ç½®
ğŸ“š **çŸ¥è¯†ç®¡ç†** - ä¸€é”®åˆ›å»ºå®Œæ•´çŸ¥è¯†åº“

ç°åœ¨å…«å­—å‘½ç›˜æ’ä»¶å·²ç»æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€ç¨³å®šå¯é çš„çŸ¥è¯†ç®¡ç†å·¥å…·ï¼ğŸŒŸ
