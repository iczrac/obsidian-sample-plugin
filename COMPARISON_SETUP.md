# 八字插件版本对比设置

## 📁 目录结构

### 重构后版本（当前开发版本）
- **位置**: `/Users/rac/Documents/AIWorkRoom/bazi-Obsidian`
- **分支**: `master`
- **特点**: 模块化架构，7000+行代码拆分为多个组件

### 重构前版本（对比版本）
- **位置**: `/Users/rac/Documents/Obsidian/插件开发/bazi-Obsidian-pre-refactor`
- **分支**: `pre-refactor` (基于提交 7af0c08)
- **特点**: 单一大文件，InteractiveBaziView.ts 约 207KB

## 🔧 在 Obsidian 中设置对比

### 步骤1: 安装重构前版本
1. 在 Obsidian 中打开设置
2. 进入"第三方插件"设置
3. 关闭"安全模式"
4. 点击"浏览"按钮，选择文件夹：
   ```
   /Users/rac/Documents/Obsidian/插件开发/bazi-Obsidian-pre-refactor
   ```
5. 启用"八字命盘"插件

### 步骤2: 测试重构前版本功能
1. 创建一个新的测试文档
2. 插入八字代码块：
   ```
   ```bazi
   生日: 2000-01-01 12:00
   性别: 男
   ```
   ```
3. 观察功能：
   - ✅ 神煞显示是否正常
   - ✅ 点击神煞是否有解释
   - ✅ 大运、流年、流月功能
   - ✅ 样式切换功能
   - ✅ 设置功能

### 步骤3: 对比重构后版本
1. 切换到重构后版本的目录：
   ```
   /Users/rac/Documents/AIWorkRoom/bazi-Obsidian
   ```
2. 使用相同的测试数据
3. 对比功能差异

## 🔍 主要对比点

### 神煞功能对比
- **重构前**: 神煞应该正常显示在八字表格中
- **重构后**: 神煞可能不显示或显示不完整

### 交互功能对比
- **重构前**: 完整的点击交互、模态框、设置
- **重构后**: 部分交互功能可能缺失

### 性能对比
- **重构前**: 单一大文件，加载可能较慢
- **重构后**: 模块化，理论上性能更好

## 🐛 已知问题

### 重构后版本的问题
1. **神煞不显示**: 主要问题，需要修复
2. **部分交互缺失**: 一些点击事件可能不工作
3. **样式可能不一致**: UI显示可能有差异

### 重构前版本的问题
1. **代码维护困难**: 7000+行单文件
2. **功能耦合严重**: 难以独立测试和修改
3. **扩展性差**: 添加新功能困难

## 📋 测试清单

### 基础功能测试
- [ ] 八字表格显示
- [ ] 天干地支颜色
- [ ] 藏干显示
- [ ] 十神显示
- [ ] 神煞显示 ⚠️
- [ ] 纳音显示

### 交互功能测试
- [ ] 大运选择
- [ ] 流年选择
- [ ] 流月选择
- [ ] 流日选择
- [ ] 流时选择
- [ ] 神煞点击解释 ⚠️
- [ ] 设置功能

### 高级功能测试
- [ ] 样式切换
- [ ] 小运显示
- [ ] 五行分析
- [ ] 格局分析

## 🎯 修复优先级

基于对比结果，确定修复优先级：

1. **高优先级**: 神煞显示和点击功能
2. **中优先级**: 交互功能完善
3. **低优先级**: 样式和性能优化

## 📝 测试记录

请在测试后记录发现的差异：

### 功能差异
- [ ] 神煞显示：重构前 ✅ / 重构后 ❌
- [ ] 神煞点击：重构前 ✅ / 重构后 ❌
- [ ] 其他功能：...

### 性能差异
- [ ] 加载速度：重构前 vs 重构后
- [ ] 响应速度：重构前 vs 重构后
- [ ] 内存使用：重构前 vs 重构后

## 🚀 下一步行动

1. **测试对比**: 使用两个版本测试相同的八字数据
2. **记录差异**: 详细记录功能差异
3. **优先修复**: 从最重要的功能开始修复
4. **逐步完善**: 逐个功能进行修复和验证
