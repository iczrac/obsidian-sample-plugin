# 🔍 Obsidian 调试信息查看指南

## 📋 **如何查看 Obsidian 的调试信息**

### **方法1：开发者工具（推荐）**

#### **步骤1：打开开发者工具**
1. **Windows/Linux**: 按 `Ctrl + Shift + I`
2. **macOS**: 按 `Cmd + Option + I`
3. **或者**: 
   - 按 `Ctrl/Cmd + P` 打开命令面板
   - 输入 "Toggle Developer Tools"
   - 回车执行

#### **步骤2：查看控制台**
1. 在开发者工具中点击 **"Console"** 标签
2. 这里会显示所有的 `console.log` 输出

#### **步骤3：过滤调试信息**
在控制台的过滤框中输入关键词来过滤信息：
- `🎴` - 查看 CodeBlockProcessor 的调试信息
- `🔥` - 查看 BaziService 的调试信息  
- `🎨` - 查看 UI 组件的调试信息
- `大运` - 查看大运相关信息
- `性别` - 查看性别参数处理

### **方法2：使用 Obsidian 插件**

#### **安装 Console Ninja 插件**
1. 在 Obsidian 设置中进入 "第三方插件"
2. 搜索并安装 "Console Ninja" 或类似的调试插件

### **方法3：查看日志文件**
1. 打开 Obsidian 设置
2. 进入 "关于" 页面
3. 点击 "显示调试信息"
4. 查看日志文件位置

---

## 🎯 **调试步骤**

### **第1步：清除控制台**
在开发者工具的控制台中右键，选择 "Clear console" 清除之前的信息。

### **第2步：测试八字代码块**
在 Obsidian 中创建或编辑包含以下内容的笔记：

```bazi
甲子 丙寅 戊申 癸亥
gender: 1
year: 1984
style: 3
```

### **第3步：查看调试输出**
在控制台中查找以下关键调试信息：

#### **🎴 CodeBlockProcessor 调试信息**
```
🎴 ========== 开始处理八字字符串 ==========
🎴 八字字符串: 甲子 丙寅 戊申 癸亥
🎴 年份参数: 1984
🎴 原始性别参数: 1
🎴 最终性别参数: 1
```

#### **🔥 BaziService 调试信息**
```
🔥 ========== BaziService.parseBaziString 开始 ==========
🔥 输入参数:
  - baziStr: 甲子 丙寅 戊申 癸亥
  - specifiedYear: 1984
  - gender: 1
🔥 ========== 检查大运流年计算条件 ==========
🔥 性别检查: 1 (应该是"1"或"0")
🔥 性别条件: true
🔥 八字对象存在: true
🔥 日期对象存在: true
🔥 所有条件满足: true
🔥 ✅ 开始计算大运流年信息
```

#### **🎨 UI 组件调试信息**
```
🎨 ========== StandardBaziView 创建大运信息 ==========
🎨 baziInfo.daYun 存在: true
🎨 baziInfo.daYun 长度: 10
🎨 ✅ 有大运数据，开始创建表格
```

---

## 🚨 **常见问题诊断**

### **问题1：性别参数没有正确传递**
**查找**: `🎴 最终性别参数:`
**期望**: 应该显示 `1` 或 `0`
**如果显示空字符串**: 性别参数解析失败

### **问题2：大运流年计算条件不满足**
**查找**: `🔥 所有条件满足:`
**期望**: 应该显示 `true`
**如果显示 `false`**: 检查具体哪个条件不满足

### **问题3：大运数据没有生成**
**查找**: `🔥 大运信息计算完成，数量:`
**期望**: 应该显示数字（如 `10`）
**如果没有这行**: 大运计算失败

### **问题4：UI 组件没有接收到大运数据**
**查找**: `🎨 baziInfo.daYun 长度:`
**期望**: 应该显示数字
**如果显示 `undefined` 或 `0`**: 数据传递失败

---

## 📝 **收集调试信息**

请按以下格式收集调试信息：

### **1. 测试用例**
```
八字: 甲子 丙寅 戊申 癸亥
性别: 1
年份: 1984
样式: 3
```

### **2. 控制台输出**
```
请复制粘贴控制台中所有包含以下前缀的信息：
🎴 (CodeBlockProcessor)
🔥 (BaziService)  
🎨 (UI组件)
```

### **3. 错误信息**
```
如果有红色的错误信息，请完整复制
```

---

## 🎯 **快速诊断命令**

在控制台中输入以下命令进行快速诊断：

```javascript
// 检查当前页面的八字元素
document.querySelectorAll('[data-bazi-source]').forEach(el => {
  console.log('八字元素:', el);
  console.log('源代码:', el.getAttribute('data-bazi-source'));
});

// 检查是否有大运表格
document.querySelectorAll('.bazi-dayun-container').forEach(el => {
  console.log('大运容器:', el);
  console.log('内容:', el.innerHTML);
});
```

---

## 📞 **提供调试信息时请包含**

1. **Obsidian 版本**: 帮助 → 关于
2. **插件版本**: 设置 → 第三方插件 → 八字插件
3. **操作系统**: Windows/macOS/Linux
4. **测试用的八字代码块**
5. **完整的控制台输出**
6. **任何错误截图**

---

## 🎊 **调试信息已添加完成！**

现在请：
1. **重新加载插件** 或 **重启 Obsidian**
2. **打开开发者工具**
3. **测试八字代码块**
4. **查看控制台输出**
5. **将调试信息发送给我**

这样我就能准确定位问题所在了！ 🚀
